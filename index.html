<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title style="font-size:200%;Text-align:center;">Redirecting...</title>
  <script>
    async function redirectUser() {
      const urlParams = new URLSearchParams(window.location.search);
      const productCode = urlParams.get("product");

      try {
        const response = await fetch("products.json");
        const products = await response.json();

        if (productCode && products[productCode]) {
          let target = products[productCode];

          // Auto-convert YouTube links
          if (target.includes("youtube.com") || target.includes("youtu.be")) {
            const videoId = target.split("v=")[1]?.split("&")[0] || target.split("/").pop();
            target = "https://www.youtube.com/watch?v=" + videoId;
          }

          window.location.href = target;
        } else {
          // ðŸš¨ Fallback if product not found
          window.location.href = "https://www.fluidmaster.com/";
        }
      } catch (error) {
        console.error("Error loading products.json", error);
        // ðŸš¨ Fallback in case JSON fails
        window.location.href = "https://www.fluidmaster.com/";
      }
    }

    redirectUser();
  </script>
</head>
<body>
  <p style="font-size:200%;Text-align:center;">Redirecting you...</p>
</body>
</html>
